<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->

<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/bootstrap-responsive.min.css">
        <link rel="stylesheet" href="css/style.css">
        <script type="text/javascript" src="http://cloud.github.com/downloads/wycats/handlebars.js/handlebars-1.0.0.beta.6.js"></script>

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script src="js/jquery-1.7.2.min.js" type="text/javascript"></script>
        <style>
            #SelectLicense{
                border-bottom: 3px #5EA8DE solid;
                background-color: #F0F1F4;
                color: #253340;
                display: block;
                float:inside;
                font: 18px 'Segoe UI', Tahoma, Arial, Helvetica, sans-serif;
                font-weight: lighter;
                margin: 0px 0px 0px 12px;
                padding: 30px;
                position: relative;
                top: 20px;
            }


        </style>
    </head>
    <body>
        <header class="navbar">
            <div class="navbar-inner">
                <div class="container conatiner_support">
                    <div class="float_left">
                        <p id="logo">
                            <a href="index.html">Site
                                Logo</a> <span class="tagline">Free project hosting</span>
                        </p>
                    </div>
                    <div class="float_right">
                        <ul class="ul_list">
                            <li>
                                <ul class="ul_list" id="nav">
                                    <li class="liSin" style="display: none;">
                                        <a id="lnkSignUp" href="ServletUserDashBoard">Home</a>
                                    </li>
                                    <li class="liSout" style="display: none;">
                                        <a id="lnkSignOut" >SignOut</a>
                                    </li>
                                    <li>
                                        <input id="searchSite" name="searchSite" maxlength="500"
                                               type="text" value="" autocomplete="off"
                                               title="Search all projects"
                                               style="color: rgb(170, 170, 170);
                                               font-style: italic;margin-top: -5px;"
                                               placeholder="Search">
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                    <div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
                            <h3 id="myModalLabel" style="color: #6A747E;"><center>Sign In</center></h3>
                        </div>
                        <div class="modal-body">
                            <form class="form-horizontal" method="post" action="">
                                <div class="control-group">
                                    <label class="loginLabel" for="inputEmail">Email</label>
                                    <div class="controls">
                                        <input type="text" id="username" name="username" placeholder="Email">
                                    </div>
                                </div>
                                <div class="control-group">
                                    <label class="loginLabel" for="inputPassword">Password</label>
                                    <div class="controls">
                                        <input type="password" id="password" name="password" placeholder="Password">
                                    </div>
                                </div>
                                <div class="control-group">
                                    <div class="controls">
                                        <label class="checkbox">
                                            <input type="checkbox"> 
                                            <label class="loginLabel" style="text-align: left !important;padding-top: 0px !important; ">Remember me</label>
                                        </label><br>
                                        <div style="color: red;" id="loginStatus"></div>

                                        <button type="button" class="btn" id="btnLogIn">Sign in</button>
                                    </div>
                                </div>
                            </form>
                        </div>

                    </div>

                </div>
            </div>
        </header>

        <div class="container conatiner_support">
            <div class="row">

                <div class="project_head">
                    <div class="project_head_image">
                        <a href="#" >
                            <img id="projImg" src="" />
                        </a>
                    </div>
                    <h1 class="project_title">
                        <div id="projTitle">
                        </div>
                    </h1>
                </div>
            </div>
        </div>

        <div class="container conatiner_support">
            <div class="row">
                <ul id="project_menu">
                    <li>
                        <a class="menuLink" href="ServletProjectHome?projId=" >Home</a>
                    </li>
                    <li id="projDash">
                        <a class="menuLink" href="frmProjectDashboard.html?projId=" >Project Management</a>
                    </li>
                    <li>
                        <a class="menuLink" href="projectDownload.html?projId=" >Downloads</a>
                    </li>
                    <li>
                        <a class="menuLink" href="ServletViewDocumentation?projId=" >Documentation</a>
                    </li>
                    <li>
                        <a class="menuLink" href="ServletGetBugs?projId=" >Bug Tracking</a>
                    </li>
                    <li>
                        <a class="menuLink" href="ServletDiscussionHead?projId=" >Discussion</a>
                    </li>
                    <li>
                        <a class="menuLink" href="ProjectPeople.jsp?projId=" >People</a>
                    </li>
                    <li>
                        <a class="menuLink" href="ProjectLicense.html?projId=" >License</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="container conatiner_support">
            <div class="row">

                <form name="selectLicense" action="" method="POST">
                    <center>
                        <div id="SelectLicense" ><br> Select license: 
                            <select id="selectLicense" >
                                <option value="0">Select license </option>
                                <option value="1">Apache License 2.0 (Apache)</option>
                                <option value="3" >New BSD License (BSD)</option>
                                <option value="4" >Eclipse Public License (EPL)</option>
                                <option value="5" >Common Development and Distribution License (CDDL)</option>              
                                <option value="6" >GNU General Public License version 2 (GPLv2)</option>
                                <option value="7" >GNU Lesser General Public License (LGPL)</option>
                                <option value="9" >The MIT License (MIT)</option>
                            </select><br>
                            <input type="button" value="Save" name="btnlicSave" id="contentbtnsave" />
                        </div>
                        <label style="color:red" id="labelcheck"></label>
                        <h1 id="contentHeader"></h1> 
                    </center>


                    <div id="content">

                    </div> 

                </form>
            </div>
        </div>
        <div id="footer">
            <div class="row">
                <hr style="color:">
                <ul class="ul_list footer_link">
                    <li class="list"></li>
                    <li class="list"><a href="#">Get Help</a></li>
                    <li class="list"><a href="#">Privacy Statement</a></li>
                    <li class="list"><a href="#">Terms of Use</a></li>
                    <li class="list"><a href="#">Code of Conduct</a></li>
                    <li class="list"><a href="#">Advertise With Us</a></li>

                </ul>
            </div>
        </div>
        <script type="text/javascript">
            (function(){
                function getParameterByName(name) {
                    name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
                    var regexS = "[\\?&]" + name + "=([^&#]*)";
                    var regex = new RegExp(regexS);
                    var results = regex.exec(window.location.search);
                    if (results == null)
                        return "";
                    else
                        return decodeURIComponent(results[1].replace(/\+/g, " "));
                }
                var projId=getParameterByName("projId");

                
                $.ajax({
                    url:'ServletCheckUserSession',
                    type:'post',
                    success:function(dt){
                        console.log(dt);
                        if (dt.status=='fail'){
                            $("ul.ul_list li.liSin").css('display','inline');
                            $("ul.ul_list li.liSout").css('display','none');
                        }else{
                            $("ul.ul_list li.liSout").css('display','inline');
                            $("ul.ul_list li.liSin").css('display','inline');
                        }
                    }
                });
                $.each($('a.menuLink'), function(key,val){
                    var link=$(val).attr('href');
                    link=link+projId;
                    $(val).attr('href',link);
                });
                $.ajax({
                    url:'ServletCheckUserType',
                    data:{
                        projId:projId
                    },
                    type:'post',
                    success:function(dt){
                        if (dt.status!='true'){
                            $("#projDash").css('display','none');
                        }
                        if (dt.type!='owner'){
                            $("#SelectLicense").css('display', 'none');
                        }
                        $("#projTitle").html(dt.projName);
                        $('#projImg').attr('src',dt.iUrl);
                    },
                    error:function(){
                        console.log('error');
                    }
                });
        
                $("#lnkSignOut").live('click',function(){
                    $.ajax({
                        url:'ServletSignOut',
                        type:'post',
                        success:function(dt){
                            console.log(dt);
                            if (dt.status=='success'){
                                $("ul.ul_list li.liSout").css('display','none');
                            }else{
                                $("ul.ul_list li.liSin").css('display','inline');
                            }
                        }
                    });
                });
                $.ajax({
                    url:'ServletGetLicense',
                    type:'post',
                    data:{
                        'type':3,
                        'projId':projId
                    },
                    success:function(data){
                        console.log('asdasdas');
                        console.log(data);
                        $("#content").html(data.licenseDesc)  ;
                        $("#contentHeader").html(data.licenseName);
                    },
                    error:function(){
                        alert('error');
                    }
                });
                $("#selectLicense").change(function(){
                    var selId=$(this).find("option:selected").attr('value');
                    console.log(selId);0
                    // $("#UpdateProgressPanel").css('display','inline');
                    $.ajax({
                        url:'ServletGetLicense',
                        type : 'POST',
                        data :{
                            'type':1,
                            'licenseId' : selId
                        },
                        success: function(data){
                            $("#content").html(data.desc)  ;
                            $("#contentHeader").html(data.licName);
                            //$("#UpdateProgressPanel").css('display','none');

                        },
                        error: function(){
                            alert('error');
                        }
                    });
                });
                
                $("#contentbtnsave").click(function(){
                    var selId=$("#selectLicense").attr('value');
                    if (selId==0){
                        $("#labelcheck").html('Select one license');
                        return ;
                    }
                    console.log("here" + selId);
                    $.ajax({
                        url:'ServletGetLicense',
                        type : 'POST',
                        data :{
                            'type':2,
                            'licenseId' : selId,
                            'projId':projId
                        },
                        success: function(data){
                            if(data.status=='success')
                            {
                                $("#labelcheck").html("successfull");
                            }
                            else
                            {
                                $("#labelcheck").html('unsucessfull');
                            }
                                
                        },
                        error: function(){
                            alert('error');
                        }
                    });
                });

            })();
        </script>
    </body>
</html>
